\section{Introduction}

\subsection{Purpose}

The purpose of this document is to provide a thorough guide for developers to implement the virtual geocaching application Fortitude. It expands on the higher level descriptions provided in the requirements document, through the use of clear diagrams and high and low level designs, so it can be used to create software that fulfills the specification laid out therein. 

From this document a mobile application and supporting website will be produced that encapsulate an exciting game based on creating, defending and conquering caches. The system realised will allow users to create accounts that can be used for playing the game Fortitude, and will be able to interact with this game through an easy to use and appealing interface.

\subsection{Scope}

The system designed within this document covers users creating accounts that can be used in conjunction with the game Fortitude, in which a user directs an army to conquer and defend caches (playing the role of forts in the game). The aim of the game is to own the most caches. The user's army size will grow in proportion to the number of caches they own, and the size of the garrison defending it influences how often each cache produces new soldiers. The user's army size can also be increased by attacking outlaw camps, which cannot be owned but provide soldiers when defeated. The user gains caches by placing new caches in available locations or using their army to conquer those owned by other users, and must also leave soldiers at their caches to defend against attacks against them. This core section of the game is conducted solely through the application; the website serves a supporting role allowing users to manage their accounts and plan battle strategies. In a future release of the game, the website will include a forum or message board system to allow users greater interaction with each other and therefore more complex strategies and alliances to be formed; in the current version, users can communicate via a private messaging system accessible through both the app and the website. Administrators of the application work through the website, and are able to place or delete caches remotely, delete user accounts, and act on user requests including questions or reporting a cache, a particular user communication or another user.

Creating an account with a username, password and email address may be done through the GUI on the phone application or the website, and is validated through an activation email sent to the user. At any time, the user can request a password reset email, and if their account has not yet been validated, a new activation email. Once authenticated, the user can build up their army of soldiers, which act effectively as a point score, and interact with caches if physically present at the cache’s location. The locations of caches are displayed on a map, which can also show the user’s location and a route from the user to a specified cache. Interactions with caches include placing a cache if no other cache is within 300m of the location; adding or withdrawing soldiers from a cache the user owns to increase or decrease the defensive army of that cache; adding soldiers to an empty, unowned cache in order to become that cache’s owner; or scouting and/or attacking an enemy cache.  At any time a user can see basic information about a cache, such as who owns it, and can see the profile of that user, which includes information such as the number of caches owned by that user.

Scouting a cache is the only method of seeing how large that cache’s defensive army is, and is done by sending a number of soldiers (each of which has a chance of failing and dying, in which case the user’s army will decrease accordingly) to scout the cache. A user can chose to attack the cache after or without scouting, and will specify the number of soldiers to attack with.  If they are victorious they become the new owner of that fort, and the surviving soldiers of their attacking army become the new defending army of the cache. In addition to this a proportion of the soldiers originally defending the cache are deemed to of surrendered, and so join the attacking army. If the attackers lose, then every attacking soldier dies and the surviving defenders will continue to defend the cache. As with if the attacking army was victorious, should the defender win, a proportion of the original attacking army are deemed to of surrendered, and so join the army of the user who owns the cache. After the battle, the user will be displayed a breakdown of results including the initial number of soldiers in each army, the winner of the battle, the survivors of the attacking side and the amount of soldiers that surrendered to the winning side.

Outlaw camps are non-player caches which can never be conquered, but can be attacked in the same way as user owned caches. These camps are defended by a number of soldiers proportional to the total number of soldiers the attacking user owns, including those defending any caches they own. For successfully defeating an outlaw camp, the attacking user gets a reward of a number of soldiers that will always be greater than the number they lost in the attack. However if the user loses, then the soldiers in the attacking army are lost. In addition, if the user successfully defeats an outlaw camp, then that user cannot attack that camp again for an amount of time that is proportional to the number of soldiers defending that cache. 

The final type of cache is the special event caches (or treasure areas) found by entering the range of a wireless network with a specific MAC address. These reward the user on finding them with a number of soldiers, and may in a future version of the game include other treasure such as weapons or advanced soldiers that would strengthen the user’s army. Each special event cache will only reward a user once and has a limited supply of treasure, meaning that after a certain number of users visit it the cache will become empty and removed from the game.

Caches cannot be interacted with on the website, but users can view caches on a map and filter the view such that, for example, only enemy caches are displayed. They can also view information about their own caches and account including a record of their history in the game. A user can also manage their account through the website, including updating their details, changing their password or requesting their account be deleted.

The application and website are run off a database storing each cache and user which is accessed and updated by a server. The server also provides the functionality behind both the app and the website, as well as checking the validity of data and commands to reduce errors or the possibility of cheating the game; this is particularly important in authenticated an account or ensuring that location specific actions are performed at the correct location. Certain restricted features, such as promoting a user to an administrator, can only be accessed directly through the server and not through the website or app.

\subsection{Definitions, Acronyms and Abbreviations}

\subsection{References}

\subsection{Overview}

The remainder of this document will be a thorough guide for developers of this system. It will be split into Interface Descriptions and Element Descriptions. In the Interface Description section there will be mock ups of the user interface for both the app and website and descriptions and diagrams of how a user might use these. The Element Description section will design the system architecture and core parts of the system, and explain decisions along the way. It will do this through design elements each with a specific function, shown through block diagrams. Class diagrams will be used to show the static structure of the system and dependencies between components. Activity diagrams and sequence diagrams will be used to show the dynamic behaviour of the system.



